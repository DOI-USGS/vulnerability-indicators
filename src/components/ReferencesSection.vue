<template>
  <section id="references">
    <div class="text-container title-text">
      <h3>{{ text.title }}</h3>
    </div>
    <div class="text-container">
      <div v-for="reference in text.references" :key="reference.subTitle">
        <p>
          <span v-html="reference.authors" />,
          <span v-html="reference.year" />,
          <a :href="reference.link" target="_blank"><span v-html="reference.title" /></a
          ><span v-if="reference.type != ''">, </span><span v-html="reference.type" /><span
            v-if="reference.ref != ''"
            >, </span
          ><span v-html="reference.ref" />.
        </p>
        <br />
      </div>
    </div>
  </section>
</template>

<script>
import { useI18n } from 'vue-i18n';

export default {
  name: 'ReferencesSection',
  data() {
    return {
      text: {}
    };
  },
  created() {
    const { locale } = useI18n();
    const lang = locale.value;

    // Dynamically import the correct references file based on the language
    if (lang === 'es') {
      import('@/assets/text/referencesText_es.js')
        .then((module) => {
          this.text = module.default.referencesContent;
          this.sortReferences();
        })
        .catch((error) => console.error('Failed to load Spanish references:', error));
    } else {
      import('@/assets/text/referencesText_en.js')
        .then((module) => {
          this.text = module.default.referencesContent;
          this.sortReferences();
        })
        .catch((error) => console.error('Failed to load English references:', error));
    }
  },
  methods: {
    sortReferences() {
      if (this.text.references && Array.isArray(this.text.references)) {
        this.text.references.sort((a, b) => {
          return a.authors.localeCompare(b.authors);
        });
      }
    }
  }
};
</script>

<style scoped lang="scss">

</style>
