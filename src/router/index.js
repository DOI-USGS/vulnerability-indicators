import { createRouter, createWebHistory } from 'vue-router';
import { useI18n } from 'vue-i18n';

const routes = [
  {
    path: '/:lang(en|es)?', // dynamic language parameter
    name: 'VisualizationContent',
    component: () => import('../views/VisualizationView.vue'),
    beforeEnter: (to, from, next) => {
      const { locale } = useI18n(); 
      const lang = to.params.lang || 'en'; // Default to 'en' if no language is provided
      locale.value = lang; // Set the locale 
      next();
    },
  },
  {
    path: '/:lang(en|es)?/index.html', // handle direct navigation to index.html with language
    name: 'Index',
    component: () => import('../views/VisualizationView.vue'),
    beforeEnter: (to, from, next) => {
      const { locale } = useI18n(); 
      const lang = to.params.lang || 'en'; // Default to 'en' if no language is provided
      locale.value = lang; // Set the locale
      next();
    },
  },
];


const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes
})

export default router
