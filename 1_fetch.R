source("1_fetch/src/fetch_utils.R")

p1_targets <- list(
  ##### Vulnerability indicators data #####
  tar_target(p1_sb_id,
             '63f79d49d34e4f7eda456572'),
  ##### Vulnerability indicators metadata #####
  tar_target(p1_vul_ind_xml,
             download_from_sb(sb_id = p1_sb_id,
                              filename = 'Uncertainty_Summary.xml',
                              dest_dir = '1_fetch/out'),
             format = 'file'),
  ##### Uncertainty statistics for the indicators #####
  tar_target(p1_unc_stats_csv,
             download_from_sb(sb_id = p1_sb_id,
                              filename = 'Uncertainty_Summary.csv',
                              dest_dir = '1_fetch/out'),
             format = 'file'),
  tar_target(p1_unc_stats,
             readr::read_csv(p1_unc_stats_csv) |> 
               janitor::clean_names()
             ),
  ##### Uncertainty Aggregated, Raw data provided by Oronde Drakes in relation to "Social vulnerability and water insecurity in the western United States: A systematic review of framings, indicators, and uncertainty" (in review) #####
  tar_target(p1_unc_agg_csv_path,
             "1_fetch/in/uncertainty_aggregated_raw_data.csv"),
  tar_target(p1_unc_agg,
             readr::read_csv(p1_unc_agg_csv_path, skip = 1) |> 
               janitor::clean_names()
             )
  )